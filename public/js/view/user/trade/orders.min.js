//function loaded(){
//	var ordersScroll = new IScroll('#ordersWrapper',{mouseWheel:false,click:true});
//}
//document.addEventListener('touchmove', function(e){e.preventDefault();}, false);
//document.addEventListener('DOMContentLoaded', loaded, false);


function LeBaiFenToPay(order_no){
	window.location.href = '/installment/order/pay?orderno='+order_no;
}

function cancelOrder(orderNo){
	layer.open({
	    content: '<ul class="alter"><li class="alttop">提示</li><li class="altbody">是否确定取消订单？</li><ul>',
	    btn: ['确定','取消'],
	    shadeClose:false,
	    yes: function(index){
			$.post('/m/trade/stoporder',{orderNo:orderNo},function(data){
				if(data == 'Y'){
					layer.open({content:'<div class="tiptext">订单取消成功</div>'});
					window.location.href = window.location.href;
				}else{
					layer.open({content:'<div class="tiptext">订单取消失败：'+data+'</div>'});
				}
			});
		},no:function(){
			layer.closeAll();
	    }
	});
}

function getGoods(order_no){
    layer.open({
        content: '<ul class="alter"><li class="alttop">提示</li><li class="altbody">是否确定收货？</li><ul>',
        btn: ['确定','取消'],
        shadeClose:false,
        yes: function(index){
            $.post('/installment/order/goods',{order_no:order_no},function(data){
                if(data == 'Y'){
                    layer.open({content:'<div class="tiptext">确认收货成功</div>'});
                    window.location.href = window.location.href;
                }else{
                    layer.open({content:'<div class="tiptext">确认收货成功：'+data+'</div>'});
                }
            });
        },no:function(){
            layer.closeAll();
        }
    });
}

function orderInfo(orderNo){
	window.location.href = '/user/trade/order?orderNo='+orderNo;
}

function writeExpress(orderNo){
    var url = encodeURIComponent(window.location.href);
    window.location.href = '/m/trade/writeexpress?orderNo='+orderNo+'&url='+url;
}
$("#ordersScroller .order_selected li").click(function(){
    $("#ordersScroller .order_selected li").removeClass('active');
    $(".order_list").removeClass('selected');
    var index =  $(this).addClass('active').attr('index');
    $(".order_list").each(function(){
        if($(this).attr('for')==index){
              $(this).addClass('selected');
        }
    });
});

function repairorderInfo(orderNo){
    window.location.href = '/repair/order/repairorder?orderNo='+orderNo;
}

function cancelRepairOrder(orderNo){
    layer.open({
        content: '<ul class="alter"><li class="alttop">提示</li><li class="altbody">是否确定取消订单？</li><ul>',
        btn: ['确定','取消'],
        shadeClose:false,
        yes: function(index){
            $.post('/user/trade/stoprepairorder',{orderNo:orderNo},function(data){
                if(data == 'Y'){
                    layer.open({content:'<div class="tiptext">订单取消成功</div>'});
                    window.location.href = window.location.href;
                }else{
                    layer.open({content:'<div class="tiptext">订单取消失败：'+data+'</div>'});
                }
            });
        },no:function(){
            layer.closeAll();
        }
    });
}

function toPay(orderNo){
    window.location.href = '/user/trade/pay?orderNo='+orderNo;
}

/**
 * 顺丰运单号查询
 */
function tocheck(orderNo){
	$.ajax({
		type:'POST'//请求方式
		,url:"/user/trade/sfydcheck"  //请求路径
		,data:{orderNo:orderNo}//发送到服务器的数据
		,cache:false
		,async:false
		,timeout:10000
		,dataType:'json'
		,success:function(data){
			if(data){
				alert('您的运单号为：'+data+'顺丰快递员上门取件时请告知他,方便打印运单');
			}else{
				alert('不存在该订单号对应的订单信息');
			}
		}
	});
}
